---
title: Laser Cutter Update
layout: post
image: /images/laserupdate/controlpanel.JPG
published: true
---

The laser has basically sat in my tiny apartment for the last three years in Los Angeles. Now that I've left my job for graduate school, I finally have the time and space to work on the laser again. The laser is nearing completion and a few big things have changed since the last time I worked on it.

<!-- more -->

Change #1: The old laser tube let out the magic gases- either due to aging, damage, or lots of transport, the exact cause is unclear. Rather than shelling out again for a 100w tube (now that I am a starving student again) I decided to downgrade to a 65w tube. This tube is only 55mm instead of the 80(?) of the original, which prompted the design of new mounts. I was never really happy with the original mounts as they only had slotted screws to allow for adjustment, which isn't very helpful for fine adjustments. The new version I designed uses two screws on each mount to allow for independent, fine adjustment of the horizontal and vertical location. The horizontal axis uses a sliding dovetail with clamp screws to lock it down once adjusted. This direction also only allows the screw to push the sliding block one way, so I'll have to manually pull it against the screw if it needs to come back, no big deal. Vertical uses gravity to rest on the adjustment screw. Note that the pictures show short adjustment screws which will need to be longer in real life.

![Tube]({{ site.url }}/images/laserupdate/side.JPG)
![Tube]({{ site.url }}/images/laserupdate/iso.JPG)

Change #2: The Smoothieboard is being replaced for two reasons. The first is that it doesn't have good support for two motors driving one gantry. The second is because it got smoked by the high voltage laser PSU.
The Smoothie only supports driving dual motors by slaving the two stepper drivers together (connecting step/dir/en pins). This is serviceable, but doesn't allow the gantry to be automatically trammed, since one of the motors is effectively dumb and can't have a separate end stop switch.
My temporary solution to this was to treat each motor as a separate axis and then post process the GCode (which is what I did to demonstrate movement in the earlier posts). This comes with an unfortunate limitation in that because the Smoothie treats these as separate axes, the fastest travel rate of the gantry is set by the max stepping rate of the board (i.e. the board maxes out at something like 200ksteps/sec, because it thinks its running 2x 100kstep motors, when they really should just be identical steps performed on 2 motors).
My best idea to overcome this was to connect the two motor driver input pins (step/dir/en) via relays controlled by the board, so the Smoothie could home all the axes individually to square the gantry, and then disable the slave Y2 motor, and enable the relays to connect it to the Y1 motor. Unfortunately, the Smoothie was smoked before I could try this.
The back story to the Smoothie smoking is as follows: I bought some 22awg 40kVDC wire on Amazon to extend my high voltage supply lines to the laser tube. When I trimmed and crimped it, I noticed that the insulation didn't look the same as my original wire. The original wire seems to have a teflon or some other hard plastic core of insulation that is then covered with silicone or some other standard insulation. This new wire just had really thick silicone insulation. I looked at it for a bit before deciding to just give it a go, as I have no other way to test high voltage insulation.
Upon firing, I just got a strange crackling noise and some shimmering light which I assumed was arcing somewhere along the wire. After a lot of investigation, I realized the light wasn't coming from a single arc, but instead the high voltage was shorting out through the frame and causing my LED strips to light up intermittently (which looked crazy, wish I'd taken a video but I was too terrified). Through more testing I discovered that the shorting wasn't coming from any single point, but rather the whole wire was shorting throughout its length, through the "40kVDC" insulation on the wire. Needless to say I was pretty upset and wrote an angry review. I then covered the entire length of wire with some vinyl tubing which stopped the shorting. I then went to check on the Smoothie, only to find that it freezes up if you try to issue any commands to it. I tried reflashing the firmware and bootloader to no avail. Back in the market for a new motion controller.

Change #3: I decided to spruce up the control panel quite a bit from my original design to make it nicer to use and safer. I added a fuse block with individual fuses for each mains component (ventilation fan, air assist pump, laser PSU, 24v PSU, water cooling pump). I've also added a nice E-Stop that cuts mains power to the whole system in addition to the motion controller E-Stop and door interlock switches I originally had. The laser PSU, water pump, air pump, and vent fan are all run power through a relay board controlled by the motion controller. I also included manual override control switches for those components. Basically these switches connect the relay control pin to one of three options: 5v, Gnd, or floating. The relay control pin is also connected to the motion controller via a 10k resistor. If you leave the manual switch in the floating position, this gives the controller board authority to turn things off and on willy nilly. If you turn it to either of the override positions, it will force the relay to remain in whatever state you want. This is useful for test running the machine with the laser disabled, or turning components off or on when the controller isn't powered up. I also added some cute little lights that turn on when each component is powered to let you know what the machine is doing.

![Panel]({{ site.url }}/images/laserupdate/controlpanelcrop.JPG)